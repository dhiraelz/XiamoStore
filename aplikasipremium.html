<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>XiamoStore - Solusi Produk Digital Terbaik</title>
    <!-- Google Fonts - Poppins untuk teks, Montserrat untuk judul -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@600;700;800&family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <!-- Remixicon for icons (for arrow icons if needed, though FA is mostly used here) -->
    <link href="https://cdn.jsdelivr.net/npm/remixicon@4.2.0/fonts/remixicon.css" rel="stylesheet" />

    <style>
        /* CSS Variables for Dark Mode (Default) */
        :root {
            --bg-deep: #1A2534; /* Body background, header background */
            --bg-card-base: #233041; /* Base for transparent elements like search bar bg, cart items, select options */
            --card-start-gradient: rgba(59, 77, 99, 0.65); /* Card gradient start */
            --card-end-gradient: rgba(46, 62, 80, 0.65); /* Card gradient end */

            --menu-item-start-gradient: #6080A5; /* Buttons, active categories gradient start */
            --menu-item-end-gradient: #8DAACB; /* Buttons, active categories gradient end */
            --menu-item-hover-start: #7FAACB; /* Button hover gradient start */
            --menu-item-hover-end: #A0C2E2; /* Button hover gradient end */

            --text-primary: #EBF2F7; /* Main text color */
            --text-secondary: #FFFFFF; /* Headings, strong text, button text */
            --accent-color: #78B2D4; /* Glow effects, some icons, prices, active elements */
            --success-color: #4CAF50; /* Checkmarks, WhatsApp icon */
            --red-alert-color: #FF5C5C; /* Cart badge, delete button */

            --shadow-light: rgba(0, 0, 0, 0.45);
            --shadow-deep: rgba(0, 0, 0, 0.7);

            --backdrop-filter-card: blur(8px); /* For hero, product cards, modals */
            --backdrop-filter-panel: blur(5px); /* For category buttons, info panel (if used) */
            --background-filter-blur: blur(10px); /* For fixed background image */
            --blob-opacity: 0.28;

            --input-bg-transparent: rgba(35, 48, 65, 0.5); /* Search input, form inputs */
            --input-border-transparent: rgba(255, 255, 255, 0.1); /* Input borders */
            --footer-bg: var(--dark-blue); /* Footer background */
            --footer-text-muted: rgba(235, 242, 247, 0.7); /* Muted text in footer, info panel p, checkbox label */
            --footer-border: rgba(255, 255, 255, 0.1); /* Footer top border, header bottom border */
            --cart-item-bg: rgba(35, 48, 65, 0.5); /* Cart item background */
            --quantity-editor-bg: rgba(0, 0, 0, 0.2); /* Quantity editor background */
        }

        /* CSS Variables for Light Mode */
        body.light-mode {
            --bg-deep: #F0F2F5;
            --bg-card-base: #FFFFFF;
            --card-start-gradient: rgba(255, 255, 255, 0.9);
            --card-end-gradient: rgba(245, 247, 250, 0.9);

            --menu-item-start-gradient: #4A69BD;
            --menu-item-end-gradient: #6B8EED;
            --menu-item-hover-start: #5C7CCD;
            --menu-item-hover-end: #7DAFFF;

            --text-primary: #333333;
            --text-secondary: #1A1A1A;
            --accent-color: #3B82F6;
            --success-color: #28A745;
            --red-alert-color: #E74C3C;

            --shadow-light: rgba(0, 0, 0, 0.1);
            --shadow-deep: rgba(0, 0, 0, 0.2);

            --backdrop-filter-card: blur(4px);
            --backdrop-filter-panel: blur(2px);
            --background-filter-blur: blur(6px);
            --blob-opacity: 0.15;

            --input-bg-transparent: rgba(255, 255, 255, 0.8);
            --input-border-transparent: rgba(0, 0, 0, 0.15);
            --footer-bg: #E0E2E5;
            --footer-text-muted: rgba(51, 51, 51, 0.7);
            --footer-border: rgba(0, 0, 0, 0.1);
            --cart-item-bg: rgba(255, 255, 255, 0.8);
            --quantity-editor-bg: rgba(0, 0, 0, 0.05);
        }

        /* Base styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background-color: var(--bg-deep);
            color: var(--text-primary);
            line-height: 1.6;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            overflow-x: hidden;
            position: relative;
            transition: background-color 0.3s ease, color 0.3s ease;
        }

        a {
            text-decoration: none;
            color: inherit;
        }

        img {
            max-width: 100%;
            height: auto;
            display: block;
        }

        /* Background Image with Blur */
        .blurred-background {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: url('backgroundweb.jpeg');
            background-size: cover;
            background-position: center;
            filter: var(--background-filter-blur);
            -webkit-filter: var(--background-filter-blur);
            z-index: -2;
            transition: filter 0.3s ease;
        }

        /* Background Blobs */
        .background-blob {
            position: fixed;
            background: var(--accent-color);
            border-radius: 50%;
            filter: blur(130px);
            opacity: var(--blob-opacity);
            z-index: -1;
            animation: pulse-blob 8s infinite alternate;
            transition: opacity 0.3s ease, background 0.3s ease;
        }
        .blob-1 { width: 380px; height: 380px; top: 18%; left: 12%; transform: translate(-50%, -50%); animation-delay: 0s; }
        .blob-2 { width: 300px; height: 300px; bottom: 22%; right: 15%; transform: translate(50%, 50%); animation-delay: 2.5s; }
        @keyframes pulse-blob {
            0% { transform: scale(1) translate(-50%, -50%); opacity: var(--blob-opacity); }
            50% { transform: scale(1.06) translate(-48%, -52%); opacity: calc(var(--blob-opacity) + 0.1); }
            100% { transform: scale(1) translate(-50%, -50%); opacity: var(--blob-opacity); }
        }

        /* Container for content */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
            position: relative;
            z-index: 1;
        }

        /* Header */
        .header {
            background-color: var(--bg-deep);
            padding: 20px 0;
            border-bottom: 1px solid var(--footer-border);
            position: sticky;
            top: 0;
            z-index: 1000;
            transition: background-color 0.3s ease, border-color 0.3s ease;
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 20px;
        }

        .header-top-row { /* New container for top row elements on desktop */
            display: contents; /* Makes children participate in flex layout of parent .header-content */
        }

        .left-header-group {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .back-button {
            background: none;
            color: var(--text-primary);
            border: none;
            border-radius: 50%;
            padding: 10px;
            font-size: 1.8em;
            cursor: pointer;
            transition: background-color 0.2s ease, color 0.2s ease;
        }

        .back-button:hover {
            background-color: rgba(var(--text-primary), 0.1);
            color: var(--accent-color);
        }

        .logo-text {
            font-family: 'Montserrat', sans-serif;
            font-weight: 700;
            font-size: 1.5em;
            color: var(--text-secondary);
            white-space: nowrap;
            transition: color 0.3s ease;
        }

        .search-bar {
            flex-grow: 1;
            max-width: 600px;
            position: relative;
        }

        .search-bar input {
            width: 100%;
            padding: 12px 20px 12px 45px;
            border: none;
            border-radius: 10px;
            background-color: var(--input-bg-transparent);
            color: var(--text-primary);
            font-size: 1em;
            outline: none;
            box-shadow: inset 0 2px 5px var(--shadow-light);
            border: 1px solid var(--input-border-transparent);
            transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease, box-shadow 0.3s ease;
        }

        .search-bar input::placeholder {
            color: rgba(var(--text-primary), 0.6);
            transition: color 0.3s ease;
        }

        .search-bar .search-icon {
            position: absolute;
            left: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: rgba(var(--text-primary), 0.6);
            transition: color 0.3s ease;
        }

        .header-icons {
            display: flex;
            gap: 15px;
            align-items: center;
        }

        .header-icons .icon-btn {
            background: none;
            border: none;
            color: var(--text-primary);
            font-size: 1.4em;
            cursor: pointer;
            padding: 5px;
            border-radius: 5px;
            transition: color 0.3s ease, background-color 0.3s ease;
            position: relative;
        }

        .header-icons .icon-btn:hover {
            color: var(--accent-color);
            background-color: rgba(var(--text-primary), 0.1);
        }

        /* Theme Toggle Button */
        .theme-toggle {
            background: none;
            border: none;
            color: var(--text-primary);
            font-size: 1.8em; /* Match back button size */
            cursor: pointer;
            z-index: 10;
            transition: color 0.3s ease, transform 0.2s ease;
            outline: none;
            padding: 5px; /* Consistent padding with other icons */
        }
        .theme-toggle:hover {
            color: var(--accent-color);
            transform: scale(1.1);
        }
        .theme-toggle:active {
            transform: scale(0.95);
        }

        .cart-badge {
            position: absolute;
            top: -5px;
            right: -5px;
            background-color: var(--red-alert-color);
            color: white;
            font-size: 0.7em;
            font-weight: 600;
            border-radius: 50%;
            padding: 3px 6px;
            min-width: 18px;
            text-align: center;
            line-height: 1;
            box-shadow: 0 2px 5px var(--shadow-light);
            transition: background-color 0.3s ease, box-shadow 0.3s ease;
        }

        /* Main content area */
        .main-content {
            flex-grow: 1;
            padding: 30px 0;
        }

        /* --- NEW CUSTOM SLIDER STYLES --- */
        .hero-section.custom-slider {
            background: linear-gradient(145deg, var(--card-start-gradient), var(--card-end-gradient));
            border-radius: 20px;
            margin-bottom: 40px;
            position: relative;
            overflow: hidden; /* Crucial for hiding parts of slides outside */
            box-shadow: 0 10px 30px var(--shadow-deep);
            min-height: 400px; /* Adjusted to fit images well */
            backdrop-filter: var(--backdrop-filter-card);
            -webkit-backdrop-filter: var(--backdrop-filter-card);
            border: 1px solid rgba(255, 255, 255, 0.15);
            transition: background 0.3s ease, box-shadow 0.3s ease, backdrop-filter 0.3s ease, border-color 0.3s ease;
            display: flex; /* To center the track */
            justify-content: center;
            align-items: center;
            padding: 20px 0; /* Adjust padding for visual balance */
        }

        .custom-carousel-track {
            position: relative;
            width: 100%;
            height: 100%;
            display: flex;
            justify-content: center; /* Center items within the track */
            align-items: center;
            min-height: 350px; /* Ensure track has height for items */
        }

        .custom-carousel-item {
            position: absolute; /* Allows precise positioning and overlap */
            width: 550px; /* Base width for items */
            height: auto; /* Height will scale with width */
            border-radius: 15px; /* Curved corners */
            overflow: hidden;
            box-shadow: 0 10px 30px var(--shadow-deep);
            cursor: pointer;
            /* Transition for smooth movement, opacity, scale, and z-index (delayed) */
            transition: transform 0.8s ease-in-out, opacity 0.8s ease-in-out, left 0.8s ease-in-out, z-index 0.0s 0.4s;
            opacity: 0; /* Default hidden state */
        }

        .custom-carousel-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 15px; /* Apply border-radius to image as well */
        }

        /* Position classes for the 3-card layout */
        .custom-carousel-item.left-pos {
            left: 50%;
            transform: translateX(calc(-50% - 280px)) scale(0.85); /* Shift left and scale down */
            opacity: 1;
            z-index: 2; /* Behind center */
        }

        .custom-carousel-item.center-pos {
            left: 50%;
            transform: translateX(-50%) scale(1.15); /* Centered and larger */
            opacity: 1;
            z-index: 3; /* On top */
        }

        .custom-carousel-item.right-pos {
            left: 50%;
            transform: translateX(calc(-50% + 280px)) scale(0.85); /* Shift right and scale down */
            opacity: 1;
            z-index: 2; /* Behind center */
        }

        /* Off-screen positions for items not currently visible (optional, but good for transition) */
        .custom-carousel-item.off-left {
            left: 50%;
            transform: translateX(calc(-50% - 560px)) scale(0.6); /* Far left, smaller, hidden */
            opacity: 0;
            z-index: 1;
        }

        .custom-carousel-item.off-right {
            left: 50%;
            transform: translateX(calc(-50% + 560px)) scale(0.6); /* Far right, smaller, hidden */
            opacity: 0;
            z-index: 1;
        }
        /* --- END NEW CUSTOM SLIDER STYLES --- */


        /* Product Grid */
        .product-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
            gap: 25px;
            margin-bottom: 40px;
        }

        .product-card {
            background: linear-gradient(145deg, var(--card-start-gradient), var(--card-end-gradient));
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 5px 20px var(--shadow-light);
            text-align: center;
            padding: 20px;
            transition: transform 0.3s ease, box-shadow 0.3s ease, background 0.3s ease, border-color 0.3s ease, backdrop-filter 0.3s ease;
            position: relative;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            border: 1px solid rgba(255, 255, 255, 0.1);
            backdrop-filter: var(--backdrop-filter-panel);
            -webkit-backdrop-filter: var(--backdrop-filter-panel);
        }

        .product-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px var(--shadow-deep);
        }
        .product-card.hidden {
            display: none;
        }

        .product-image {
            width: 100px;
            height: 100px;
            object-fit: cover;
            border-radius: 10px;
            margin: 0 auto 15px;
        }

        .product-image[src="capcutlogo.png"],
        .product-image[src="slideshare.jpeg"] {
            width: 80px;
            height: 80px;
        }

        .product-icon-fa {
            font-size: 3.5em;
            width: 80px;
            height: 80px;
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 0 auto 15px;
            color: var(--accent-color);
            background-color: transparent;
            border-radius: 10px;
            transition: color 0.3s ease;
        }

        .product-name {
            font-weight: 600;
            font-size: 1.1em;
            margin-bottom: 8px;
            color: var(--text-secondary);
            flex-grow: 1;
            transition: color 0.3s ease;
        }

        .product-price {
            font-size: 1em;
            font-weight: 500;
            color: var(--accent-color);
            margin-bottom: 15px;
            display: block;
            transition: color 0.3s ease;
        }

        .add-to-cart-btn {
            background: linear-gradient(90deg, var(--menu-item-start-gradient), var(--menu-item-end-gradient));
            color: var(--text-secondary);
            border: none;
            border-radius: 8px;
            padding: 10px 15px;
            font-size: 0.9em;
            font-weight: 600;
            cursor: pointer;
            transition: background 0.2s ease, transform 0.1s ease, box-shadow 0.2s ease, color 0.3s ease;
            width: 100%;
            margin-top: 10px;
            box-shadow: 0 2px 5px var(--shadow-light);
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 8px;
            font-size: 1.1em;
        }

        .add-to-cart-btn:hover {
            background: linear-gradient(90deg, var(--menu-item-hover-start), var(--menu-item-hover-end));
            transform: translateY(-1px);
            box-shadow: 0 4px 10px var(--shadow-deep);
        }

        /* Load More Button */
        .load-more-btn {
            display: block;
            margin: 0 auto 50px;
            padding: 15px 30px;
            background: linear-gradient(90deg, var(--menu-item-start-gradient), var(--menu-item-end-gradient));
            color: var(--text-secondary);
            border: none;
            border-radius: 10px;
            font-size: 1.1em;
            font-weight: 600;
            cursor: pointer;
            transition: background 0.3s ease, transform 0.2s ease, box-shadow 0.3s ease, color 0.3s ease;
            box-shadow: 0 5px 15px var(--shadow-light);
        }

        .load-more-btn:hover {
            background: linear-gradient(90deg, var(--menu-item-hover-start), var(--menu-item-hover-end));
            transform: translateY(-2px);
            box-shadow: 0 8px 20px var(--shadow-deep);
        }

        /* Register Banner */
        .register-banner {
            background: linear-gradient(145deg, var(--card-start-gradient), var(--card-end-gradient));
            border-radius: 20px;
            padding: 50px;
            margin-bottom: 50px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 30px;
            position: relative;
            overflow: hidden;
            box-shadow: 0 10px 30px var(--shadow-deep);
            backdrop-filter: var(--backdrop-filter-card);
            -webkit-backdrop-filter: var(--backdrop-filter-card);
            border: 1px solid rgba(255, 255, 255, 0.15);
            transition: background 0.3s ease, box-shadow 0.3s ease, backdrop-filter 0.3s ease, border-color 0.3s ease;
        }

        .register-text-content {
            max-width: 60%;
            text-align: left;
            z-index: 1;
        }

        .register-banner h3 {
            font-family: 'Montserrat', sans-serif;
            font-size: 2.5em;
            font-weight: 700;
            margin-bottom: 15px;
            color: var(--text-secondary);
            transition: color 0.3s ease;
        }

        .register-banner p {
            font-size: 1.05em;
            color: var(--footer-text-muted);
            margin-bottom: 25px;
            transition: color 0.3s ease;
        }

        .register-btn {
            background: linear-gradient(90deg, var(--menu-item-start-gradient), var(--menu-item-end-gradient));
            color: var(--text-secondary);
            padding: 15px 35px;
            border: none;
            border-radius: 10px;
            font-size: 1.1em;
            font-weight: 600;
            cursor: pointer;
            transition: background 0.3s ease, transform 0.2s ease, box-shadow 0.3s ease, color 0.3s ease;
            box-shadow: 0 5px 15px var(--shadow-light);
        }

        .register-btn:hover {
            background: linear-gradient(90deg, var(--menu-item-hover-start), var(--menu-item-hover-end));
            transform: translateY(-2px);
            box-shadow: 0 8px 20px var(--shadow-deep);
        }

        /* REMOVED .register-illustration CSS RULE */

        /* Footer */
        .footer {
            background-color: var(--footer-bg);
            padding: 50px 0 30px;
            color: var(--footer-text-muted);
            font-size: 0.9em;
            position: relative;
            z-index: 1;
            transition: background-color 0.3s ease, color 0.3s ease, box-shadow 0.3s ease;
            box-shadow: 0 -2px 10px var(--shadow-light);
        }

        .footer-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 30px;
            margin-bottom: 40px;
        }

        .footer-col h4 {
            font-family: 'Montserrat', sans-serif;
            font-size: 1.1em;
            font-weight: 600;
            margin-bottom: 20px;
            color: var(--text-secondary);
            transition: color 0.3s ease;
        }

        .footer-col ul {
            list-style: none;
            padding: 0;
        }

        .footer-col ul li {
            margin-bottom: 10px;
            padding-left: 0;
            text-align: left;
        }

        .footer-col ul li a {
            transition: color 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
            margin-left: -5px;
            color: var(--footer-text-muted); /* Ensure links follow muted text color */
        }

        .footer-col ul li a:hover {
            color: var(--accent-color);
        }

        .footer-col ul li a .fab.fa-whatsapp {
            color: #25D366; /* Specific color for WhatsApp icon */
            transition: color 0.3s ease;
        }
        
        .footer-social-icons {
            display: flex;
            gap: 15px;
            margin-top: 20px;
        }

        .footer-social-icons a {
            color: var(--footer-text-muted);
            font-size: 1.5em;
            transition: color 0.3s ease;
        }

        .footer-social-icons a:hover {
            color: var(--accent-color);
        }

        .footer-bottom {
            text-align: center;
            padding-top: 20px;
            border-top: 1px solid var(--footer-border);
            font-size: 0.8em;
            color: rgba(var(--text-primary), 0.5); /* Hardcoding opacity to prevent double opacity issues */
            transition: color 0.3s ease, border-color 0.3s ease;
        }
        body.light-mode .footer-bottom {
            color: rgba(51, 51, 51, 0.5); /* Specific muted color for light mode */
        }

        /* Styles for the Shopping Cart Modal */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1100;
            visibility: hidden;
            opacity: 0;
            transition: visibility 0.3s, opacity 0.3s;
        }

        .modal-overlay.active {
            visibility: visible;
            opacity: 1;
        }

        .modal-content {
            background: linear-gradient(145deg, var(--card-start-gradient), var(--card-end-gradient));
            border-radius: 15px;
            padding: 30px;
            max-width: 450px;
            width: 90%;
            box-shadow: 0 10px 30px var(--shadow-deep);
            position: relative;
            transform: translateY(-20px);
            transition: transform 0.3s ease-out, background 0.3s ease, box-shadow 0.3s ease, backdrop-filter 0.3s ease, border-color 0.3s ease;
            backdrop-filter: var(--backdrop-filter-card);
            -webkit-backdrop-filter: var(--backdrop-filter-card);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .modal-overlay.active .modal-content {
            transform: translateY(0);
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
        }

        .modal-header h3 {
            font-family: 'Montserrat', sans-serif;
            font-size: 1.6em;
            font-weight: 700;
            color: var(--text-secondary);
            transition: color 0.3s ease;
        }

        .modal-close-btn {
            background: none;
            border: none;
            color: var(--text-primary);
            font-size: 1.8em;
            cursor: pointer;
            transition: color 0.2s ease;
        }

        .modal-close-btn:hover {
            color: var(--red-alert-color);
        }

        .cart-items {
            margin-bottom: 20px;
        }

        .cart-item {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-between;
            align-items: center;
            background-color: var(--cart-item-bg);
            padding: 15px 20px;
            border-radius: 10px;
            margin-bottom: 15px;
            border: 1px solid var(--input-border-transparent);
            gap: 10px;
            transition: background-color 0.3s ease, border-color 0.3s ease;
        }

        .cart-item-details {
            display: flex;
            flex-direction: column;
            text-align: left;
            flex-basis: 100%;
            margin-bottom: 10px;
        }
        .cart-item-details strong {
            font-size: 1.05em;
            margin-bottom: 5px;
            color: var(--text-secondary);
            transition: color 0.3s ease;
        }
        .cart-item-details span {
            font-size: 0.9em;
            color: var(--footer-text-muted);
            transition: color 0.3s ease;
        }

        .cart-item-action-group {
            display: flex;
            align-items: center;
            flex-grow: 1;
            justify-content: space-between;
            min-width: 250px;
        }

        .quantity-editor {
            display: flex;
            align-items: center;
            background-color: var(--quantity-editor-bg);
            border-radius: 5px;
            overflow: hidden;
            border: 1px solid var(--input-border-transparent);
            flex-shrink: 0;
            transition: background-color 0.3s ease, border-color 0.3s ease;
        }

        .quantity-editor .quantity-btn {
            background-color: transparent;
            color: var(--text-secondary);
            border: none;
            padding: 8px 12px;
            font-size: 1.1em;
            cursor: pointer;
            transition: background-color 0.2s ease, color 0.3s ease;
            flex-shrink: 0;
        }

        .quantity-editor .quantity-btn:hover {
            background-color: rgba(var(--text-secondary), 0.1);
        }
        .quantity-editor .quantity-btn:active {
            background-color: rgba(var(--text-secondary), 0.2);
        }

        .quantity-editor .item-quantity-input {
            background: transparent;
            border: none;
            color: var(--text-secondary);
            font-weight: 500;
            padding: 0 5px;
            width: 40px;
            text-align: center;
            font-size: 1em;
            outline: none;
            transition: color 0.3s ease;
        }
        .quantity-editor .item-quantity-input::-webkit-outer-spin-button,
        .quantity-editor .item-quantity-input::-webkit-inner-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }

        .item-line-total {
            font-size: 1em;
            font-weight: 600;
            color: var(--accent-color);
            text-align: right;
            flex-shrink: 0;
            margin-left: 10px;
            min-width: 80px;
            transition: color 0.3s ease;
        }

        .cart-item .hapus-btn {
            background-color: var(--red-alert-color);
            color: white;
            border: none;
            border-radius: 8px;
            padding: 8px 12px;
            font-size: 0.9em;
            font-weight: 500;
            cursor: pointer;
            transition: background-color 0.2s ease;
            flex-shrink: 0;
            margin-left: 10px;
        }

        .cart-item .hapus-btn:hover {
            background-color: #e64a4a;
        }

        .cart-total {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 0;
            border-top: 1px solid var(--footer-border);
            margin-top: 20px;
            transition: border-color 0.3s ease;
        }

        .cart-total strong {
            font-size: 1.2em;
            color: var(--text-secondary);
            transition: color 0.3s ease;
        }

        .cart-total span {
            font-size: 1.2em;
            font-weight: 600;
            color: var(--accent-color);
            transition: color 0.3s ease;
        }

        .btn-lanjut-pembayaran {
            display: block;
            width: 100%;
            padding: 15px 20px;
            background: linear-gradient(90deg, var(--menu-item-start-gradient), var(--menu-item-end-gradient));
            color: var(--text-secondary);
            border: none;
            border-radius: 10px;
            font-size: 1.1em;
            font-weight: 600;
            cursor: pointer;
            transition: background 0.2s ease, transform 0.1s ease, box-shadow 0.2s ease, color 0.3s ease;
            margin-top: 25px;
            box-shadow: 0 5px 15px var(--shadow-light);
        }

        .btn-lanjut-pembayaran:hover {
            background: linear-gradient(90deg, var(--menu-item-hover-start), var(--menu-item-hover-end));
            transform: translateY(-1px);
            box-shadow: 0 8px 20px var(--shadow-deep);
        }

        /* Responsive adjustments for modal specifically */
        @media (max-width: 480px) {
            .modal-content {
                padding: 20px;
            }
            .modal-header h3 {
                font-size: 1.4em;
            }
            .modal-close-btn {
                font-size: 1.5em;
            }
            .cart-item {
                flex-direction: column;
                align-items: flex-start;
                padding: 12px 15px;
            }
            .cart-item-details {
                flex-basis: auto;
                margin-bottom: 8px;
            }
            .cart-item-action-group {
                flex-direction: row;
                justify-content: space-between;
                width: 100%;
                min-width: unset;
            }
            .quantity-editor {
                padding: 0;
            }
            .item-line-total {
                font-size: 0.9em;
                margin-left: 0;
                min-width: unset;
                text-align: left;
            }
            .hapus-btn {
                padding: 6px 10px;
                font-size: 0.8em;
                margin-left: 0;
            }
            .cart-total {
                font-size: 1em;
            }
            .btn-lanjut-pembayaran {
                font-size: 1em;
                padding: 12px 15px;
            }
        }

        /* NEW: Styles for the Info Modal (the "card" that pops up) */
        .info-modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1200;
            visibility: hidden;
            opacity: 0;
            transition: visibility 0.3s, opacity 0.3s;
        }

        .info-modal-overlay.active {
            visibility: visible;
            opacity: 1;
        }

        .info-modal-content {
            background: linear-gradient(145deg, var(--card-start-gradient), var(--card-end-gradient));
            border-radius: 15px;
            padding: 30px;
            max-width: 500px;
            width: 90%;
            box-shadow: 0 10px 30px var(--shadow-deep);
            position: relative;
            transform: translateY(-20px);
            transition: transform 0.3s ease-out, background 0.3s ease, box-shadow 0.3s ease, backdrop-filter 0.3s ease, border-color 0.3s ease;
            backdrop-filter: var(--backdrop-filter-card);
            -webkit-backdrop-filter: var(--backdrop-filter-card);
            border: 1px solid rgba(255, 255, 255, 0.2);
            text-align: center;
        }

        .info-modal-overlay.active .info-modal-content {
            transform: translateY(0);
        }

        .info-modal-content .modal-header {
            margin-bottom: 20px;
        }

        .info-modal-content .modal-header h3 {
            font-size: 1.8em;
            margin-bottom: 0;
            transition: color 0.3s ease;
        }

        .info-modal-body {
            font-size: 1em;
            color: var(--text-primary);
            margin-bottom: 20px;
            line-height: 1.8;
            text-align: left;
            transition: color 0.3s ease;
            max-height: 70vh; /* Make it scrollable if content is too tall */
            overflow-y: auto; /* Add vertical scrollbar when content overflows */
            padding-right: 15px; /* Add some padding to prevent text from touching scrollbar */
        }
        
        .info-modal-body p {
            margin-bottom: 10px;
            transition: color 0.3s ease;
        }
        .info-modal-body ul {
            list-style: disc;
            margin-left: 20px;
            margin-bottom: 10px;
            transition: color 0.3s ease;
        }
        .info-modal-body ul li {
            margin-bottom: 5px;
            transition: color 0.3s ease;
        }

        @media (max-width: 480px) {
            .info-modal-content {
                padding: 20px;
            }
            .info-modal-content .modal-header h3 {
                font-size: 1.5em;
            }
            .info-modal-body {
                font-size: 0.9em;
            }
        }
        
        /* Specific styles for Variation Modal (similar to cart modal) */
        #variationModal .modal-content {
            max-width: 400px;
        }

        .variation-options {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin-bottom: 20px;
        }

        .variation-options label {
            background-color: var(--cart-item-bg);
            padding: 15px 20px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 15px;
            cursor: pointer;
            border: 1px solid var(--input-border-transparent);
            transition: border-color 0.2s ease, box-shadow 0.2s ease, background-color 0.2s ease;
        }

        .variation-options label:hover {
            border-color: var(--accent-color);
            background-color: var(--bg-card-base);
            box-shadow: 0 0 10px rgba(var(--accent-color), 0.3);
        }

        .variation-options input[type="radio"] {
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            border: 2px solid var(--accent-color);
            outline: none;
            cursor: pointer;
            position: relative;
            flex-shrink: 0;
            transition: background-color 0.3s ease, border-color 0.3s ease;
        }

        .variation-options input[type="radio"]:checked {
            background-color: var(--accent-color);
            border-color: var(--accent-color);
        }

        .variation-options input[type="radio"]:checked::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background-color: var(--bg-deep);
            transition: background-color 0.3s ease;
        }

        .variation-info {
            flex-grow: 1;
            text-align: left;
        }

        .variation-info strong {
            display: block;
            font-size: 1.1em;
            color: var(--text-secondary);
            transition: color 0.3s ease;
        }

        .variation-info span {
                font-size: 0.9em;
                color: var(--footer-text-muted);
                transition: color 0.3s ease;
        }

        .variation-price {
            font-size: 1.1em;
            font-weight: 600;
            color: var(--accent-color);
            flex-shrink: 0;
            transition: color 0.3s ease;
        }

        /* Make sure the add button in this modal also looks good */
        #addVariedProductToCartBtn {
            margin-top: 0;
        }

        /* Responsive adjustments for variation modal */
        @media (max-width: 480px) {
            #variationModal .modal-content {
                padding: 15px;
            }
            .variation-options label {
                padding: 12px 15px;
                flex-direction: column;
                align-items: flex-start;
                gap: 5px;
            }
            .variation-info strong {
                font-size: 1em;
            }
            .variation-info span {
                font-size: 0.85em;
            }
            .variation-price {
                font-size: 1em;
                width: 100%;
                text-align: right;
            }
            .variation-options input[type="radio"] {
                position: relative;
                margin-right: 10px;
                align-self: flex-start;
                margin-top: 5px;
            }
            .variation-options label {
                position: relative;
                padding-left: 45px;
            }
            .variation-options input[type="radio"] {
                position: absolute;
                left: 15px;
                top: 50%;
                transform: translateY(-50%);
            }
        }

        /* START NEW MEDIA QUERIES FOR MOBILE OPTIMIZATION */
        /* General Mobile Adjustments (Tablet and larger phones) */
        @media (max-width: 768px) {
            .container {
                padding: 0 15px; /* Adjust container padding */
            }

            /* Header */
            .header-content {
                flex-direction: column; /* Always stack for mobile views */
                align-items: center; /* Center main blocks (top-row and search-bar) */
                gap: 15px; /* Adjust spacing */
                padding: 15px; /* Adjust padding */
            }

            .header-top-row { /* New container for top row elements */
                width: 100%;
                display: flex;
                justify-content: space-between; /* Distribute items to edges */
                align-items: center;
            }

            .left-header-group {
                gap: 10px; /* Reduce gap */
            }
            .logo-text {
                font-size: 1.3em; /* Slightly smaller logo */
            }
            .back-button, .theme-toggle, .header-icons .icon-btn {
                font-size: 1.6em; /* Slightly smaller icons */
                padding: 8px;
            }

            .search-bar {
                width: 100%; /* Make search bar full width */
                margin-top: 0; /* No extra margin if already in column flow */
            }

            /* Hero Section / Custom Slider */
            .hero-section.custom-slider {
                min-height: 380px; /* Adjusted to fit images well, up from 300px */
                padding: 15px 0;
            }
            .custom-carousel-item {
                width: 400px; /* Significantly larger base width for tablets/mobiles, up from 200px */
            }
            .custom-carousel-item.left-pos {
                transform: translateX(calc(-50% - 200px)) scale(0.9); /* Adjusted positioning for larger width, was 200px */
            }
            .custom-carousel-item.center-pos {
                transform: translateX(-50%) scale(1.1); /* Slightly less large on mobile, was 1.1 */
            }
            .custom-carousel-item.right-pos {
                transform: translateX(calc(-50% + 200px)) scale(0.9); /* Adjusted positioning for larger width, was 200px */
            }
            .custom-carousel-item.off-left {
                transform: translateX(calc(-50% - 400px)) scale(0.6);
            }
            .custom-carousel-item.off-right {
                transform: translateX(calc(-50% + 400px)) scale(0.6);
            }


            /* Product Grid */
            .product-grid {
                grid-template-columns: repeat(auto-fill, minmax(150px, 1fr)); /* Allow smaller cards, aim for 2-3 columns */
                gap: 20px; /* Reduce gap */
            }

            .product-card {
                padding: 15px; /* Adjust card padding */
            }

            .product-image {
                width: 80px;
                height: 80px;
                margin-bottom: 10px;
            }

            .product-image[src="capcutlogo.png"],
            .product-image[src="slideshare.jpeg"] {
                width: 70px;
                height: 70px;
            }

            .product-icon-fa {
                font-size: 3em;
                width: 70px;
                height: 70px;
                margin-bottom: 10px;
            }

            .product-name {
                font-size: 1em; /* Smaller product name */
            }

            .product-price {
                font-size: 0.9em; /* Smaller price */
            }

            .add-to-cart-btn {
                padding: 8px 12px;
                font-size: 0.95em;
            }

            .load-more-btn {
                padding: 12px 25px;
                font-size: 1em;
                margin-bottom: 30px;
            }

            /* Register Banner */
            .register-banner {
                flex-direction: column; /* Stack content and illustration vertically */
                padding: 30px 20px; /* Adjust padding */
                text-align: center;
            }

            .register-text-content {
                max-width: 100%; /* Take full width */
                margin-bottom: 0; /* Removed space as illustration is gone */
            }

            .register-banner h3 {
                font-size: 1.8em; /* Smaller heading */
                line-height: 1.2;
            }

            .register-banner p {
                font-size: 0.95em; /* Smaller paragraph text */
                margin-bottom: 20px; /* Keep some space below paragraph */
            }

            .register-btn {
                padding: 12px 25px;
                font-size: 1em;
            }

            /* Footer */
            .footer-content {
                grid-template-columns: 1fr; /* Single column layout for footer */
                gap: 25px;
                text-align: center; /* Center footer columns content */
            }

            .footer-col {
                padding-bottom: 20px; /* Add spacing between cols */
                border-bottom: 1px solid var(--footer-border); /* Add subtle separator */
            }

            .footer-col:last-child {
                border-bottom: none; /* No border for the last one */
                padding-bottom: 0;
            }

            .footer-col ul {
                display: flex; /* Make list items inline */
                flex-direction: column; /* Stack them again for readability */
                align-items: center; /* Center list items */
            }

            .footer-col ul li a {
                margin-left: 0; /* Remove left margin for centering */
            }

            .footer-social-icons {
                justify-content: center; /* Center social icons */
            }

            .footer-bottom {
                padding-top: 15px;
            }
        }

        /* Further adjustments for very small screens (e.g., iPhone SE, narrowest phones) */
        @media (max-width: 480px) {
            .container {
                padding: 0 10px;
            }

            /* Header - Fine-tuning for smallest phones */
            .logo-text {
                font-size: 1.2em; /* Slightly smaller logo text for very small screens */
            }
            .back-button, .theme-toggle, .header-icons .icon-btn {
                font-size: 1.5em; /* Slightly smaller icons for very small screens */
            }
            .search-bar input {
                padding: 10px 15px 10px 40px; /* Adjust padding for smaller input */
                font-size: 0.9em;
            }
            .search-bar .search-icon {
                left: 10px; /* Adjust icon position */
                font-size: 1.2em;
            }

            /* Hero Section / Custom Slider */
            .hero-section.custom-slider {
                min-height: 300px; /* Adjusted, up from 250px */
            }
            .custom-carousel-item {
                width: 320px; /* Even larger base width, up from 150px */
            }
            .custom-carousel-item.left-pos {
                transform: translateX(calc(-50% - 160px)) scale(0.85); /* Adjusted positioning for larger width, was 150px */
            }
            .custom-carousel-item.center-pos {
                transform: translateX(-50%) scale(1.05); /* No scale-up for center, was 1.05 */
            }
            .custom-carousel-item.right-pos {
                transform: translateX(calc(-50% + 160px)) scale(0.85); /* Adjusted positioning for larger width, was 150px */
            }
            .custom-carousel-item.off-left {
                transform: translateX(calc(-50% - 300px)) scale(0.5);
            }
            .custom-carousel-item.off-right {
                transform: translateX(calc(-50% + 300px)) scale(0.5);
            }

            /* Product Grid */
            .product-grid {
                grid-template-columns: 1fr 1fr; /* Force two columns on very small screens */
                gap: 10px;
            }
            .product-card {
                padding: 10px;
            }
            .product-image {
                width: 60px;
                height: 60px;
                margin-bottom: 8px;
            }
            .product-image[src="capcutlogo.png"],
            .product-image[src="slideshare.jpeg"] {
                width: 50px;
                height: 50px;
            }
            .product-icon-fa {
                font-size: 2.2em;
                width: 50px;
                height: 50px;
                margin-bottom: 8px;
            }
            .product-name {
                font-size: 0.9em;
                margin-bottom: 5px;
            }
            .product-price {
                font-size: 0.85em;
                margin-bottom: 10px;
            }
            .add-to-cart-btn {
                padding: 5px 8px;
                font-size: 0.85em;
            }

            /* Register Banner */
            .register-banner {
                padding: 20px 10px;
            }
            .register-banner h3 {
                font-size: 1.4em;
                margin-bottom: 10px;
            }
            .register-banner p {
                font-size: 0.8em;
                margin-bottom: 15px;
            }
            .register-btn {
                padding: 10px 20px;
                font-size: 0.9em;
            }
        }
        /* END NEW MEDIA QUERIES FOR MOBILE OPTIMIZATION */
    </style>
</head>
<body>
    <!-- Background Image with Blur -->
    <div class="blurred-background"></div>

    <!-- Background Blobs -->
    <div class="background-blob blob-1"></div>
    <div class="background-blob blob-2"></div>

    <header class="header">
        <div class="container header-content">
            <!-- NEW: Wrap left-header-group and header-icons in a new container -->
            <div class="header-top-row">
                <div class="left-header-group">
                    <button class="back-button" onclick="history.back()"><i class="fas fa-arrow-left"></i></button>
                    <div class="logo-text">XiamoStore</div>
                </div>
                <div class="header-icons">
                    <button class="icon-btn" id="theme-toggle" aria-label="Toggle theme">
                        <i class="fas fa-sun"></i> <!-- Initial icon for dark mode (to switch to light) -->
                    </button>
                    <button class="icon-btn" id="cartIcon">
                        <i class="fas fa-shopping-cart"></i>
                        <span class="cart-badge" id="cartBadge">0</span>
                    </button>
                </div>
            </div>
            <div class="search-bar">
                <i class="fas fa-search search-icon"></i>
                <input type="text" placeholder="Cari produk ">
            </div>
        </div>
    </header>

    <main class="main-content">
        <div class="container">
            <!-- Hero Section / Custom Slider (replacing the old one) -->
                <div class="custom-carousel-track">
                    <div class="custom-carousel-item" data-id="0">
                        <img src="poster1.png" alt="Poster 1">
                    </div>
                    <div class="custom-carousel-item" data-id="1">
                        <img src="poster2.png" alt="Poster 2">
                    </div>
                    <div class="custom-carousel-item" data-id="2">
                        <img src="poster3.png" alt="Poster 3">
                    </div>
                </div>
            </section>

            <!-- Product Grid -->
            <section class="product-grid" id="productGrid">
                <!-- Products initially visible -->
                <!-- Product Card 1: CapCut -->
                <div class="product-card">
                    <img src="capcutlogo.png" alt="CapCut Icon" class="product-image">
                    <h5 class="product-name">CapCut</h5>
                    <span class="product-price">Rp 5.000</span>
                    <button class="add-to-cart-btn" data-product-name="CapCut"><i class="fas fa-cart-plus"></i></button>
                </div>
                <!-- Product Card 2: Blackbox AI (NEW) -->
                <div class="product-card">
                    <img src="blackbox.png" alt="Blackbox AI Icon" class="product-image">
                    <h5 class="product-name">Blackbox AI</h5>
                    <span class="product-price">Rp 15.000</span>
                    <button class="add-to-cart-btn" data-product-name="Blackbox AI"><i class="fas fa-cart-plus"></i></button>
                </div>
                <!-- Product Card 3: Viu (NEW) -->
                <div class="product-card">
                    <img src="Viu.jpeg" alt="Viu Icon" class="product-image">
                    <h5 class="product-name">Viu</h5>
                    <span class="product-price">Rp 6.000</span>
                    <button class="add-to-cart-btn" data-product-name="Viu"><i class="fas fa-cart-plus"></i></button>
                </div>
                <!-- Product Card 4: Spotify Premium (NEW) -->
                <div class="product-card">
                    <img src="Spotify.jpeg" alt="Spotify Premium Icon" class="product-image">
                    <h5 class="product-name">Spotify Premium</h5>
                    <span class="product-price">Rp 9.000</span>
                    <button class="add-to-cart-btn" data-product-name="Spotify Premium"><i class="fas fa-cart-plus"></i></button>
                </div>
                <!-- Product Card 5: YouTube Premium (NEW) -->
                <div class="product-card">
                    <img src="YouTube Premium.jpeg" alt="YouTube Premium Icon" class="product-image">
                    <h5 class="product-name">YouTube Premium</h5>
                    <span class="product-price">Rp 55.000</span>
                    <button class="add-to-cart-btn" data-product-name="YouTube Premium"><i class="fas fa-cart-plus"></i></button>
                </div>
                <!-- Product Card 6: DeepL -->
                <div class="product-card">
                    <img src="deepl.png" alt="DeepL Icon" class="product-image">
                    <h5 class="product-name">DeepL</h5>
                    <span class="product-price">Rp 35.000</span>
                    <button class="add-to-cart-btn" data-product-name="DeepL"><i class="fas fa-cart-plus"></i></button>
                </div>
                <!-- Product Card 7: Duolingo -->
                <div class="product-card">
                    <img src="duolingo.png" alt="Duolingo Icon" class="product-image">
                    <h5 class="product-name">Duolingo</h5>
                    <span class="product-price">Rp 4.000</span>
                    <button class="add-to-cart-btn" data-product-name="Duolingo"><i class="fas fa-cart-plus"></i></button>
                </div>
                <!-- Product Card 8: Gemini AI -->
                <div class="product-card">
                    <img src="https://via.placeholder.com/80x80/2E3E50/FFFFFF?text=Gemini" alt="Gemini AI Icon" class="product-image">
                    <h5 class="product-name">Gemini AI</h5>
                    <span class="product-price">Rp 80.000</span>
                    <button class="add-to-cart-btn" data-product-name="Gemini AI"><i class="fas fa-cart-plus"></i></button>
                </div>
                
                <!-- NEW PRODUCTS (Initially Hidden via JS) -->
                <!-- Product Card 10: Canva Pro -->
                <div class="product-card">
                    <img src="canva.png" alt="Canva Pro Icon" class="product-image">
                    <h5 class="product-name">Canva Pro</h5>
                    <span class="product-price">Rp 2.500</span>
                    <button class="add-to-cart-btn" data-product-name="Canva Pro"><i class="fas fa-cart-plus"></i></button>
                </div>
                <!-- Product Card 11: Picsart -->
                <div class="product-card">
                    <img src="https://via.placeholder.com/80x80/2E3E50/FFFFFF?text=Picsart" alt="Picsart Icon" class="product-image">
                    <h5 class="product-name">Picsart</h5>
                    <span class="product-price">Rp 10.000</span>
                    <button class="add-to-cart-btn" data-product-name="Picsart"><i class="fas fa-cart-plus"></i></button>
                </div>
                <!-- Product Card 12: Scribd -->
                <div class="product-card">
                    <img src="https://via.placeholder.com/80x80/2E3E50/FFFFFF?text=Scribd" alt="Scribd Icon" class="product-image">
                    <h5 class="product-name">Scribd</h5>
                    <span class="product-price">Rp 10.000</span>
                    <button class="add-to-cart-btn" data-product-name="Scribd"><i class="fas fa-cart-plus"></i></button>
                </div>
                <!-- Product Card 13: WeTV -->
                <div class="product-card">
                    <img src="https://via.placeholder.com/80x80/2E3E50/FFFFFF?text=WeTV" alt="WeTV Icon" class="product-image">
                    <h5 class="product-name">WeTV</h5>
                    <span class="product-price">Rp 22.000</span>
                    <button class="add-to-cart-btn" data-product-name="WeTV"><i class="fas fa-cart-plus"></i></button>
                </div>
                <!-- Product Card 14: VPN Express -->
                <div class="product-card">
                    <img src="https://via.placeholder.com/80x80/2E3E50/FFFFFF?text=Express" alt="VPN Express Icon" class="product-image">
                    <h5 class="product-name">VPN Express</h5>
                    <span class="product-price">Rp 8.000</span>
                    <button class="add-to-cart-btn" data-product-name="VPN Express"><i class="fas fa-cart-plus"></i></button>
                </div>
                <!-- Product Card 15: VPN HMA -->
                <div class="product-card">
                    <img src="https://via.placeholder.com/80x80/2E3E50/FFFFFF?text=HMA" alt="VPN HMA Icon" class="product-image">
                    <h5 class="product-name">VPN HMA</h5>
                    <span class="product-price">Rp 8.000</span>
                    <button class="add-to-cart-btn" data-product-name="VPN HMA"><i class="fas fa-cart-plus"></i></button>
                </div>
                <!-- Product Card 16: VPN Surfshark -->
                <div class="product-card">
                    <img src="https://via.placeholder.com/80x80/2E3E50/FFFFFF?text=Surfshark" alt="VPN Surfshark Icon" class="product-image">
                    <h5 class="product-name">VPN Surfshark</h5>
                    <span class="product-price">Rp 7.000</span>
                    <button class="add-to-cart-btn" data-product-name="VPN Surfshark"><i class="fas fa-cart-plus"></i></button>
                </div>
                <!-- Product Card 17: Prime Video -->
                <div class="product-card">
                    <img src="https://via.placeholder.com/80x80/2E3E50/FFFFFF?text=Prime" alt="Prime Video Icon" class="product-image">
                    <h5 class="product-name">Prime Video</h5>
                    <span class="product-price">Rp 14.000</span>
                    <button class="add-to-cart-btn" data-product-name="Prime Video"><i class="fas fa-cart-plus"></i></button>
                </div>
                <!-- Product Card 18: Apple Music -->
                <div class="product-card">
                    <img src="applemusic.png" alt="Apple Music Icon" class="product-image">
                    <h5 class="product-name">Apple Music</h5>
                    <span class="product-price">Rp 6.000</span>
                    <button class="add-to-cart-btn" data-product-name="Apple Music"><i class="fas fa-cart-plus"></i></button>
                </div>
                <!-- Product Card 19: Alight Motion -->
                <div class="product-card">
                    <img src="https://via.placeholder.com/80x80/2E3E50/FFFFFF?text=Alight" alt="Alight Motion Icon" class="product-image">
                    <h5 class="product-name">Alight Motion</h5>
                    <span class="product-price">Rp 10.000</span>
                    <button class="add-to-cart-btn" data-product-name="Alight Motion"><i class="fas fa-cart-plus"></i></button>
                </div>
                <!-- Product Card 20: GDrive Lifetime -->
                <div class="product-card">
                    <img src="https://via.placeholder.com/80x80/2E3E50/FFFFFF?text=GDrive" alt="Google Drive Lifetime Icon" class="product-image">
                    <h5 class="product-name">GDrive Lifetime</h5>
                    <span class="product-price">Rp 35.000</span>
                    <button class="add-to-cart-btn" data-product-name="GDrive Lifetime"><i class="fas fa-cart-plus"></i></button>
                </div>
                <!-- Product Card 21: Unlock Slideshare (NEW) -->
                <div class="product-card">
                    <img src="slideshare.jpeg" alt="Unlock Slideshare Icon" class="product-image">
                    <h5 class="product-name">Unlock Slideshare</h5>
                    <span class="product-price">Rp 1.500</span>
                    <button class="add-to-cart-btn" data-product-name="Unlock Slideshare"><i class="fas fa-cart-plus"></i></button>
                </div>
                <!-- Product Card 22: Zoom (NEW) -->
                <div class="product-card">
                    <img src="https://via.placeholder.com/80x80/2E3E50/FFFFFF?text=Zoom" alt="Zoom Icon" class="product-image">
                    <h5 class="product-name">Zoom</h5>
                    <span class="product-price">Rp 7.000</span>
                    <button class="add-to-cart-btn" data-product-name="Zoom"><i class="fas fa-cart-plus"></i></button>
                </div>
            </section>

            <button class="load-more-btn" id="loadMoreBtn">Tampilkan Lebih Banyak</button>

            <!-- Register Banner -->
            <section class="register-banner">
                <div class="register-text-content">
                    <h3>Dapatkan Berbagai Keuntungan Dengan Bergabung Menjadi Reseller</h3>
                    <p>Kamu akan bebas biaya admin, lebih mudah mengelola pesanan, serta bebas mengatur jumlah dan menyimpannya ke dalam keranjang. Tunggu apa lagi?</p>
                    <button class="register-btn">Gabung Sekarang</button>
                </div>
                <!-- REMOVED THE MASCOT IMAGE -->
            </section>
        </div>
    </main>

    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-col">
                    <h4>XiamoStore</h4>
                    <p>XiamoStore adalah destinasi utama Anda untuk beragam produk digital premium. Kami menawarkan akses mudah ke layanan terbaik di bidang AI, desain grafis, hiburan musik dan video, serta alat produktivitas dan edukasi, semuanya dengan harga terjangkau. Nikmati pengalaman digital yang aman, cepat, dan terpercaya bersama kami!</p>
                    <div class="footer-social-icons">
                        <a href="https://wa.me/6287844643452" target="_blank"><i class="fab fa-whatsapp"></i></a>
                        <a href="https://instagram.com/xiamostore.id" target="_blank"><i class="fab fa-instagram"></i></a>
                        <a href="https://t.me/xiamostore" target="_blank"><i class="fab fa-telegram-plane"></i></a>
                    </div>
                </div>
                <div class="footer-col" id="footerProductCategories">
                    <h4>Kategori Produk</h4>
                    <ul>
                        <li><a href="javascript:void(0)" data-link-type="category">AI</a></li>
                        <li><a href="javascript:void(0)" data-link-type="category">Desain</a></li>
                        <li><a href="javascript:void(0)" data-link-type="category">Musik & Video</a></li>
                        <li><a href="javascript:void(0)" data-link-type="category">Edukasi</a></li>
                        <li><a href="javascript:void(0)" data-link-type="category">Productivity</a></li>
                    </ul>
                </div>
                <div class="footer-col" id="footerOtherLinks">
                    <h4>Lainnya</h4>
                    <ul>
                        <li><a href="https://wa.me/6287844643452" target="_blank"><i class="fab fa-whatsapp"></i> Tanya Admin</a></li>
                        <li><a href="javascript:void(0)" data-link-type="other">Cara Pembelian</a></li>
                        <li><a href="javascript:void(0)" data-link-type="other">Tips Hemat</a></li>
                        <li><a href="javascript:void(0)" data-link-type="other">FAQ</a></li>
                    </ul>
                </div>
            </div>
            <div class="footer-bottom">
                 2025 XiamoStore. Sudah terdaftar sebagai penyedia media elektronik di Komdigi.
            </div>
        </div>
    </footer>

    <!-- Shopping Cart Modal -->
    <div class="modal-overlay" id="cartModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Keranjang Belanja</h3>
                <button class="modal-close-btn" id="closeModalBtn"></button>
            </div>
            <div class="cart-items" id="modalCartItems">
                <!-- Items will be dynamically added here -->
            </div>
            <div class="cart-total">
                <strong>Total:</strong>
                <span id="cartTotal">Rp 0</span>
            </div>
            <button class="btn-lanjut-pembayaran">Lanjutkan ke Pembayaran</button>
        </div>
    </div>

    <!-- NEW: Info Modal (for footer links) -->
    <div class="info-modal-overlay" id="infoModal">
        <div class="info-modal-content">
            <div class="modal-header">
                <h3 id="infoModalTitle"></h3>
                <button class="modal-close-btn" id="closeInfoModalBtn"></button>
            </div>
            <div class="info-modal-body" id="infoModalBody">
                <!-- Content will be dynamically added here -->
            </div>
        </div>
    </div>

    <!-- NEW: Variation Selection Modal -->
    <div class="modal-overlay" id="variationModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="variationModalTitle">Pilih Durasi Premium</h3>
                <button class="modal-close-btn" id="closeVariationModalBtn"></button>
            </div>
            <div class="modal-body">
                <div class="variation-options" id="variationOptionsContainer">
                    <!-- Variations will be dynamically inserted here -->
                </div>
                <button class="btn-lanjut-pembayaran" id="addVariedProductToCartBtn">Tambahkan ke Keranjang</button>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // === Theme Toggle Logic ===
            const themeToggle = document.getElementById('theme-toggle');
            const body = document.body;

            // Function to set the theme
            function setTheme(theme) {
                if (theme === 'light') {
                    body.classList.add('light-mode');
                    themeToggle.innerHTML = '<i class="fas fa-moon"></i>'; // Moon icon for light mode (to switch to dark)
                    localStorage.setItem('theme', 'light');
                } else {
                    body.classList.remove('light-mode');
                    themeToggle.innerHTML = '<i class="fas fa-sun"></i>'; // Sun icon for dark mode (to switch to light)
                    localStorage.setItem('theme', 'dark');
                }
            }

            // Check for saved theme preference or system preference on load
            const savedTheme = localStorage.getItem('theme');
            if (savedTheme) {
                setTheme(savedTheme);
            } else if (window.matchMedia && window.matchMedia('(prefers-color-scheme: light)').matches) {
                // If no saved theme, check system preference. If system prefers light, set to light.
                setTheme('light');
            } else {
                // Default to dark mode if no preference found or system prefers dark
                setTheme('dark');
            }

            // Toggle theme on button click
            themeToggle.addEventListener('click', () => {
                if (body.classList.contains('light-mode')) {
                    setTheme('dark');
                } else {
                    setTheme('light');
                }
            });


            // --- NEW: Custom 3-Card Carousel Logic ---
            const carouselItems = document.querySelectorAll('.custom-carousel-item');
            const totalItems = carouselItems.length;

            // Initialize currentVisualOrder with the actual DOM elements for the initial [left, center, right] positions
            let currentVisualOrder = [];
            if (totalItems >= 3) {
                currentVisualOrder = [
                    carouselItems[0], // poster1.png initially in left-pos
                    carouselItems[1], // poster2.png initially in center-pos
                    carouselItems[2]  // poster3.png initially in right-pos
                ];
            } else {
                console.error("Tidak cukup item carousel untuk slider 3 kartu. Dibutuhkan minimal 3.");
                // Fallback or disable slider if not enough items
                return; // Stop execution if critical items are missing
            }

            function applyCarouselPositions() {
                // First, remove all position classes from all carousel items
                carouselItems.forEach(item => {
                    item.classList.remove('left-pos', 'center-pos', 'right-pos', 'off-left', 'off-right');
                });

                // Apply specific position classes to the items in currentVisualOrder
                currentVisualOrder[0].classList.add('left-pos');
                currentVisualOrder[1].classList.add('center-pos');
                currentVisualOrder[2].classList.add('right-pos');

                // For any other items (if totalItems > 3, though here it's fixed at 3),
                // they would be put into an 'off-screen' class.
                // Since we only have 3 items, the ones in currentVisualOrder cover all cases.
            }

            function nextCarouselSlide() {
                // Get the current elements from their visual roles
                const oldLeft = currentVisualOrder[0];
                const oldCenter = currentVisualOrder[1];
                const oldRight = currentVisualOrder[2];

                // Update the order based on the requested animation:
                // Right card moves to front (center)
                // Front (center) card moves to left
                // Left card moves to the far right (cyclically)
                // So, the new order of elements will be: [oldCenter, oldRight, oldLeft]
                currentVisualOrder = [oldCenter, oldRight, oldLeft];

                applyCarouselPositions();
            }

            // Initial setup of the carousel positions
            applyCarouselPositions();

            // Start automatic sliding every 2 seconds
            let slideInterval = setInterval(nextCarouselSlide, 2000);

            // Optional: Pause carousel on hover
            const customSliderSection = document.querySelector('.custom-slider');
            if (customSliderSection) {
                customSliderSection.addEventListener('mouseenter', () => clearInterval(slideInterval));
                customSliderSection.addEventListener('mouseleave', () => slideInterval = setInterval(nextCarouselSlide, 2000));
            }
            // --- END NEW CUSTOM SLIDER LOGIC ---


            // === Fungsionalitas Modal Keranjang Belanja ===
            const cartIcon = document.getElementById('cartIcon');
            const cartModal = document.getElementById('cartModal');
            const closeModalBtn = document.getElementById('closeModalBtn');
            const cartBadge = document.getElementById('cartBadge');
            const modalCartItems = document.getElementById('modalCartItems');
            const cartTotalSpan = document.getElementById('cartTotal');
            const addToCartButtons = document.querySelectorAll('.add-to-cart-btn');
            const btnLanjutPembayaran = document.querySelector('.btn-lanjut-pembayaran');

            // NEW: Elements for the Variation Selection Modal
            const variationModal = document.getElementById('variationModal');
            const closeVariationModalBtn = document.getElementById('closeVariationModalBtn');
            const variationModalTitle = document.getElementById('variationModalTitle');
            const variationOptionsContainer = document.getElementById('variationOptionsContainer');
            const addVariedProductToCartBtn = document.getElementById('addVariedProductToCartBtn');

            let currentProductForVariation = null; // To store the product being configured

            // Define product data with variations (this is crucial!)
            // Each product will have a 'variations' array
            const allProductsData = {
                "CapCut": {
                    image: "capcutlogo.png",
                    badge: "DESAIN",
                    variations: [{
                        duration: "7 Hari",
                        price: 5000
                    }, {
                        duration: "1 Bulan",
                        price: 15000
                    }, {
                        duration: "6 Bulan",
                        price: 150000
                    }]
                },
                "Blackbox AI": {
                    image: "blackbox.png",
                    badge: "AI",
                    variations: [{
                        duration: "60 Hari",
                        price: 15000
                    }]
                },
                "Viu": {
                    image: "Viu.jpeg",
                    badge: "MUSIK & VIDEO",
                    variations: [{
                        duration: "12 Bulan",
                        price: 6000
                    }]
                },
                "Spotify Premium": {
                    image: "Spotify.jpeg",
                    badge: "MUSIK & VIDEO",
                    variations: [{
                        duration: "1 Bulan",
                        price: 9000
                    }]
                },
                "YouTube Premium": {
                    image: "YouTube Premium.jpeg",
                    badge: "MUSIK & VIDEO",
                    variations: [{
                        duration: "1 Bulan",
                        price: 55000
                    }, {
                        duration: "3 Bulan",
                        price: 150000
                    }]
                },
                "DeepL": {
                    image: "deepl.png",
                    badge: "EDUKASI",
                    variations: [{
                        duration: "1 Bulan",
                        price: 35000
                    }]
                },
                "Duolingo": {
                    image: "duolingo.png",
                    badge: "EDUKASI",
                    variations: [{
                        duration: "Code Redeem",
                        price: 4000
                    }]
                },
                "Gemini AI": {
                    image: "https://via.placeholder.com/80x80/2E3E50/FFFFFF?text=Gemini",
                    badge: "AI",
                    variations: [{
                        duration: "1 Bulan",
                        price: 80000
                    }, {
                        duration: "3 Bulan",
                        price: 220000
                    }]
                },
                "Canva Pro": {
                    image: "canva.png",
                    badge: "DESAIN",
                    variations: [{
                        duration: "1 Bulan",
                        price: 2500
                    }, {
                        duration: "3 Bulan",
                        price: 6000
                    }, {
                        duration: "6 Bulan",
                        price: 12000
                    }, {
                        duration: "1 Tahun",
                        price: 25000
                    }]
                },
                "Picsart": {
                    image: "https://via.placeholder.com/80x80/2E3E50/FFFFFF?text=Picsart",
                    badge: "DESAIN",
                    variations: [{
                        duration: "1 Bulan",
                        price: 8000
                    }]
                },
                "Scribd": {
                    image: "https://via.placeholder.com/80x80/2E3E50/FFFFFF?text=Scribd",
                    badge: "EDUKASI",
                    variations: [{
                        duration: "1 Bulan",
                        price: 9000
                    }]
                },
                "WeTV": {
                    image: "https://via.placeholder.com/80x80/2E3E50/FFFFFF?text=WeTV",
                    badge: "MUSIK & VIDEO",
                    variations: [{
                        duration: "1 Bulan",
                        price: 22000
                    }]
                },
                "VPN Express": {
                    image: "https://via.placeholder.com/80x80/2E3E50/FFFFFF?text=Express",
                    badge: "VPN",
                    variations: [{
                        duration: "1 Bulan",
                        price: 8000
                    }]
                },
                "VPN HMA": {
                    image: "https://via.placeholder.com/80x80/2E3E50/FFFFFF?text=HMA",
                    badge: "VPN",
                    variations: [{
                        duration: "1 Bulan",
                        price: 8000
                    }]
                },
                "VPN Surfshark": {
                    image: "https://via.placeholder.com/80x80/2E3E50/FFFFFF?text=Surfshark",
                    badge: "VPN",
                    variations: [{
                        duration: "Premium 7 Hari",
                        price: 7000
                    }, {
                        duration: "Reedem 2 Bulan",
                        price: 15000
                    }, {
                        duration: "Premium 2 Bulan",
                        price: 32000
                   }, {
                        duration: "Premium 1 Tahun",
                        price: 65000
                    }]
                },
                "Prime Video": {
                    image: "https://via.placeholder.com/80x80/2E3E50/FFFFFF?text=Prime",
                    badge: "MUSIK & VIDEO",
                    variations: [{
                        duration: "1 Bulan",
                        price: 12000
                    }]
                },
                "Apple Music": {
                    image: "applemusic.png",
                    badge: "MUSIK & VIDEO",
                    variations: [{
                        duration: "30 hari",
                        price: 6000
                    }]
                },
                "Alight Motion": {
                    image: "https://via.placeholder.com/80x80/2E3E50/FFFFFF?text=Alight",
                    badge: "DESAIN",
                    variations: [{
                        duration: "12 Bulan",
                        price: 10000
                    }]
                },
                "GDrive Lifetime": {
                    image: "https://via.placeholder.com/80x80/2E3E50/FFFFFF?text=GDrive",
                    badge: "PRODUCTIVITY",
                    variations: [{
                        duration: "1 TB Storage",
                        price: 32000
                    }]
                },
                "Unlock Slideshare": {
                    image: "slideshare.jpeg",
                    badge: "EDUKASI",
                    variations: [{
                        duration: "1 Link",
                        price: 1500
                    }]
                },
                "Zoom": {
                    image: "https://via.placeholder.com/80x80/2E3E50/FFFFFF?text=Zoom",
                    badge: "PRODUCTIVITY",
                    variations: [{
                        duration: "14 Hari",
                        price: 7000
                    }]
                }
            };


            let cartItems = []; // Array untuk menyimpan item di keranjang

            // Load cart from localStorage saat halaman dimuat
            function loadCartFromLocalStorage() {
                const storedCart = localStorage.getItem('xiamoStoreCart');
                if (storedCart) {
                    try {
                        const parsedCart = JSON.parse(storedCart);
                        cartItems = parsedCart;
                    } catch (e) {
                        console.error("Error parsing cart data from localStorage:", e);
                        cartItems = []; // Reset if parsing fails
                    }
                }
            }

            // Helper function to format currency
            function formatRupiah(number) {
                return new Intl.NumberFormat('id-ID', {
                    style: 'currency',
                    currency: 'IDR',
                    minimumFractionDigits: 0
                }).format(number);
            }

            // Fungsi untuk memperbarui tampilan keranjang belanja (badge dan modal)
            function updateCartDisplay() {
                modalCartItems.innerHTML = ''; // Kosongkan daftar item di modal
                let total = 0;
                let itemCount = 0;

                if (cartItems.length === 0) {
                    modalCartItems.innerHTML = '<p style="text-align: center; color: var(--footer-text-muted);">Keranjang Anda kosong.</p>';
                    btnLanjutPembayaran.disabled = true; // Nonaktifkan tombol jika keranjang kosong
                    btnLanjutPembayaran.style.opacity = '0.5'; // Memberi efek visual nonaktif
                    btnLanjutPembayaran.style.cursor = 'not-allowed';
                } else {
                    btnLanjutPembayaran.disabled = false; // Aktifkan tombol jika ada item
                    btnLanjutPembayaran.style.opacity = '1'; // Mengembalikan efek visual aktif
                    btnLanjutPembayaran.style.cursor = 'pointer';

                    cartItems.forEach((item) => {
                        const cartItemDiv = document.createElement('div');
                        cartItemDiv.classList.add('cart-item');
                        cartItemDiv.dataset.productName = item.name; // Use full name with duration for uniqueness

                        cartItemDiv.innerHTML = `
                            <div class="cart-item-details">
                                <strong>${item.name}</strong>
                                <span>Harga per item: ${formatRupiah(item.price)}</span>
                            </div>
                            <div class="cart-item-action-group">
                                <div class="quantity-editor">
                                    <button class="quantity-btn decrease-quantity" data-product-name="${item.name}">-</button>
                                    <input type="number" class="item-quantity-input" value="${item.quantity}" min="1" data-product-name="${item.name}">
                                    <button class="quantity-btn increase-quantity" data-product-name="${item.name}">+</button>
                                </div>
                                <span class="item-line-total">${formatRupiah(item.price * item.quantity)}</span>
                                <button class="hapus-btn" data-product-name="${item.name}"><i class="fas fa-trash-alt"></i></button>
                            </div>
                        `;
                        modalCartItems.appendChild(cartItemDiv);
                        total += item.price * item.quantity;
                        itemCount += item.quantity;
                    });
                }

                cartBadge.textContent = itemCount; // Perbarui badge di header
                cartTotalSpan.textContent = formatRupiah(total); // Perbarui total di modal

                // Simpan cart ke localStorage setelah update display
                localStorage.setItem('xiamoStoreCart', JSON.stringify(cartItems));
            }

            // Fungsi untuk membuka modal keranjang
            function openCartModal() {
                updateCartDisplay(); // Pastikan tampilan keranjang terbaru saat dibuka
                cartModal.classList.add('active');
            }

            // Fungsi untuk menutup modal keranjang
            function closeCartModal() {
                cartModal.classList.remove('active');
            }

            // Event listener untuk membuka modal saat ikon keranjang diklik
            if (cartIcon) {
                cartIcon.addEventListener('click', openCartModal);
            }

            // Event listener untuk menutup modal saat tombol 'X' diklik
            if (closeModalBtn) {
                closeModalBtn.addEventListener('click', closeCartModal);
            }

            // Event listener untuk menutup modal saat mengklik di luar konten modal
            if (cartModal) {
                cartModal.addEventListener('click', (event) => {
                    if (event.target === cartModal) { // Hanya tutup jika klik langsung pada overlay
                        closeCartModal();
                    }
                });
            }

            // === NEW: Fungsionalitas Modal Pemilihan Variasi ===

            // Function to open variation modal
            function openVariationModal(productName) {
                currentProductForVariation = productName;
                variationModalTitle.textContent = `Pilih Durasi untuk ${productName}`; // Changed "Premium" to "Durasi"
                variationOptionsContainer.innerHTML = ''; // Clear previous options

                const productData = allProductsData[productName];
                if (productData && productData.variations && productData.variations.length > 0) {
                    productData.variations.forEach((variation, index) => {
                        const label = document.createElement('label');
                        label.innerHTML = `
                            <input type="radio" name="product-duration" value="${variation.duration}" data-price="${variation.price}" ${index === 0 ? 'checked' : ''}>
                            <div class="variation-info">
                                <strong>${variation.duration}</strong>
                                <span>Akses Premium</span>
                            </div>
                            <span class="variation-price">${formatRupiah(variation.price)}</span>
                        `;
                        variationOptionsContainer.appendChild(label);
                    });
                    addVariedProductToCartBtn.disabled = false;
                    addVariedProductToCartBtn.style.opacity = '1';
                    addVariedProductToCartBtn.style.cursor = 'pointer';
                } else {
                    variationOptionsContainer.innerHTML = `<p style="text-align: center; color: var(--footer-text-muted);">Tidak ada variasi tersedia untuk produk ini.</p>`;
                    addVariedProductToCartBtn.disabled = true;
                    addVariedProductToCartBtn.style.opacity = '0.5';
                    addVariedProductToCartBtn.style.cursor = 'not-allowed';
                }

                variationModal.classList.add('active');
            }

            // Function to close variation modal
            function closeVariationModal() {
                variationModal.classList.remove('active');
                currentProductForVariation = null; // Clear the product context
            }

            // Event listener for opening the variation modal (replaces direct add to cart)
            addToCartButtons.forEach(button => {
                // Pastikan tidak ada listener lama yang menumpuk jika kode ini dijalankan berkali-kali
                // button.removeEventListener('click', (e) => { /* Dummy function to remove previous general handler */ });
                button.addEventListener('click', () => {
                    const productName = button.dataset.productName;
                    openVariationModal(productName);
                });
            });

            // Event listener for adding product with variation to cart from the variation modal
            addVariedProductToCartBtn.addEventListener('click', () => {
                const selectedRadio = variationOptionsContainer.querySelector('input[name="product-duration"]:checked');

                if (selectedRadio && currentProductForVariation) {
                    const duration = selectedRadio.value;
                    const price = parseInt(selectedRadio.dataset.price);

                    const itemDisplayName = `${currentProductForVariation} (${duration})`;

                    const existingItem = cartItems.find(item => item.name === itemDisplayName);

                    if (existingItem) {
                        existingItem.quantity++;
                    } else {
                        cartItems.push({
                            name: itemDisplayName,
                            price: price,
                            quantity: 1
                        });
                    }

                    updateCartDisplay();
                    closeVariationModal();
                    alert(`'${itemDisplayName}' telah ditambahkan ke keranjang!`);
                } else {
                    alert("Silakan pilih durasi terlebih dahulu.");
                }
            });

            // Event listener for closing variation modal
            closeVariationModalBtn.addEventListener('click', closeVariationModal);
            variationModal.addEventListener('click', (event) => {
                if (event.target === variationModal) {
                    closeVariationModal();
                }
            });

            // === Fungsionalitas Tombol 'Hapus', '+', '-' di dalam Modal & Input Kuantitas (menggunakan event delegation) ===
            modalCartItems.addEventListener('click', (event) => {
                const targetBtn = event.target;
                // Pastikan kita mendapatkan parent dengan data-product-name yang benar
                const cartItemElement = targetBtn.closest('.cart-item');
                if (!cartItemElement) return;

                const productName = cartItemElement.dataset.productName;
                let item = cartItems.find(i => i.name === productName);

                if (!item) return; // Item tidak ditemukan

                if (targetBtn.classList.contains('hapus-btn')) {
                    // Tombol Hapus
                    cartItems = cartItems.filter(i => i.name !== productName); // Hapus item sepenuhnya
                } else if (targetBtn.classList.contains('increase-quantity')) {
                    // Tombol +
                    item.quantity++;
                } else if (targetBtn.classList.contains('decrease-quantity')) {
                    // Tombol -
                    if (item.quantity > 1) {
                        item.quantity--;
                    } else {
                        // Jika kuantitas menjadi 0, hapus item
                        cartItems = cartItems.filter(i => i.name !== productName);
                    }
                }
                updateCartDisplay(); // Perbarui tampilan keranjang setelah perubahan
            });

            // Event listener untuk perubahan pada input kuantitas
            modalCartItems.addEventListener('change', (event) => {
                if (event.target.classList.contains('item-quantity-input')) {
                    const inputElement = event.target;
                    const productName = inputElement.dataset.productName;
                    let item = cartItems.find(i => i.name === productName);

                    if (!item) return;

                    let newQuantity = parseInt(inputElement.value);

                    if (isNaN(newQuantity) || newQuantity < 1) {
                        newQuantity = 1; // Pastikan kuantitas minimal 1
                    }

                    item.quantity = newQuantity;
                    updateCartDisplay(); // Perbarui tampilan keranjang
                }
            });


            // === Fungsionalitas Tombol 'Lanjutkan ke Pembayaran' ===
            if (btnLanjutPembayaran) {
                btnLanjutPembayaran.addEventListener('click', () => {
                    if (cartItems.length > 0) {
                        // Data keranjang sudah disimpan otomatis ke localStorage oleh updateCartDisplay()
                        window.location.href = 'pembayaran.html'; // Redirect ke halaman pembayaran
                    } else {
                        alert("Keranjang Anda kosong. Tambahkan produk terlebih dahulu.");
                    }
                });
            }

            // Panggil loadCartFromLocalStorage dan updateCartDisplay saat halaman dimuat
            loadCartFromLocalStorage();
            updateCartDisplay();

            // === Fungsionalitas "Tampilkan Lebih Banyak" ===
            // Fungsi untuk menghasilkan kartu produk
            function generateProductCard(productName, data) {
                const card = document.createElement('div');
                card.classList.add('product-card');

                // Determine image or icon
                let mediaHtml = '';
                // Check if the image source is a placeholder link
                if (data.image && data.image.includes('via.placeholder.com')) {
                    // If it's a placeholder, remove the text and use the actual product name in alt
                    mediaHtml = `<img src="${data.image.split('?')[0]}" alt="${productName} Icon" class="product-image">`;
                } else if (data.image) {
                    mediaHtml = `<img src="${data.image}" alt="${productName} Icon" class="product-image">`;
                } else if (data.iconClass) {
                    mediaHtml = `<i class="${data.iconClass} product-icon-fa"></i>`;
                } else {
                    mediaHtml = `<img src="https://via.placeholder.com/80x80/2E3E50/FFFFFF?text=${productName.replace(/\s/g, '+')}" alt="${productName} Icon" class="product-image">`;
                }
                
                // Get the lowest price for display
                const lowestPrice = data.variations.length > 0
                    ? data.variations.reduce((min, p) => p.price < min ? p.price : min, data.variations[0].price)
                    : 0;

                card.innerHTML = `
                    ${mediaHtml}
                    <h5 class="product-name">${productName}</h5>
                    <span class="product-price">${formatRupiah(lowestPrice)}</span>
                    <button class="add-to-cart-btn" data-product-name="${productName}"><i class="fas fa-cart-plus"></i></button>
                `;
                return card;
            }

            const productGrid = document.getElementById('productGrid');
            const loadMoreButton = document.getElementById('loadMoreBtn');
            const productsPerLoad = 8;
            let loadedProductCount = 0;

            // Function to load products into the grid
            function loadProducts() {
                // Clear existing cards if refreshing the grid (for full reload scenario, not for 'load more')
                productGrid.innerHTML = '';
                loadedProductCount = 0; // Reset for a full redraw

                const productNames = Object.keys(allProductsData);
                
                // Sort products alphabetically by name (optional)
                productNames.sort();

                productNames.forEach(name => {
                    const productData = allProductsData[name];
                    const card = generateProductCard(name, productData);
                    productGrid.appendChild(card);
                });

                // Re-initialize add to cart buttons listeners after new cards are added
                document.querySelectorAll('.add-to-cart-btn').forEach(button => {
                    button.removeEventListener('click', (e) => { /* Dummy function */ });
                    button.addEventListener('click', (event) => {
                        const productName = event.currentTarget.dataset.productName;
                        openVariationModal(productName);
                    });
                });

                loadMoreButton.style.display = 'none'; // With all products generated at once, no need for "Load More"
            }

            // Call loadProducts on page load to generate all products based on allProductsData
            loadProducts();


            // === NEW: Fungsionalitas Info Modal (untuk link footer) ===
            const infoModal = document.getElementById('infoModal');
            const infoModalTitle = document.getElementById('infoModalTitle');
            const infoModalBody = document.getElementById('infoModalBody');
            const closeInfoModalBtn = document.getElementById('closeInfoModalBtn');
            const footerProductCategories = document.getElementById('footerProductCategories');
            const footerOtherLinks = document.getElementById('footerOtherLinks');

            function openInfoModal(title, content) {
                infoModalTitle.textContent = title;
                infoModalBody.innerHTML = content; // Using innerHTML to allow for richer content
                infoModal.classList.add('active');
            }

            function closeInfoModal() {
                infoModal.classList.remove('active');
            }

            // Event listener untuk tombol 'X' di info modal
            if (closeInfoModalBtn) {
                closeInfoModalBtn.addEventListener('click', closeInfoModal);
            }

            // Event listener untuk menutup info modal saat mengklik di luar konten modal
            if (infoModal) {
                infoModal.addEventListener('click', (event) => {
                    if (event.target === infoModal) {
                        closeInfoModal();
                    }
                });
            }

            // Data untuk konten modal per tautan
            const footerContent = {
                "AI": "<p>Kategori ini mencakup produk dan layanan berbasis Artificial Intelligence (Kecerdasan Buatan), seperti langganan chatbot canggih, alat pembuat konten otomatis, dan asisten virtual.</p>",
                "Desain": "<p>Temukan berbagai software dan sumber daya desain grafis premium di sini. Mulai dari aplikasi pengedit foto, video, hingga platform dengan jutaan template siap pakai untuk kebutuhan kreatif Anda.</p>",
                "Musik & Video": "<p>Nikmati hiburan tanpa batas dengan akses ke platform streaming musik dan video premium. Dapatkan akses ke jutaan lagu, film terbaru, serial TV eksklusif, dan konten lainnya tanpa iklan.</p>",
                "Edukasi": "<p>Tingkatkan pengetahuan dan keterampilan Anda dengan koleksi produk edukasi kami. Termasuk langganan platform belajar online, e-book, kursus interaktif, dan aplikasi pembelajaran bahasa.</p>",
                "Productivity": "<p>Optimalkan produktivitas Anda dengan berbagai alat bantu premium. Kategori ini menawarkan solusi untuk penyimpanan cloud, manajemen proyek, alat kolaborasi, hingga software office lengkap.</p>",
                "Cara Pembelian": `
                    <h4>Langkah-langkah Pembelian di XiamoStore:</h4>
                    <ol>
                        <li>Pilih produk digital yang Anda inginkan dari daftar produk.</li>
                        <li>Klik ikon keranjang (<i class="fas fa-cart-plus"></i>) pada produk untuk menambahkannya ke keranjang.</li>
                        <li>Setelah selesai memilih, klik ikon keranjang di pojok kanan atas untuk melihat ringkasan belanja Anda.</li>
                        <li>Pastikan semua item dan jumlah sudah benar, lalu klik "Lanjutkan ke Pembayaran".</li>
                        <li>Ikuti instruksi pembayaran yang tersedia.</li>
                        <li>Setelah pembayaran dikonfirmasi, Anda akan menerima detail akses produk melalui WhatsApp.</li>
                    </ol>
                `,
                "Tips Hemat": `
                    <h4>Tips Hemat Belanja di XiamoStore:</h4>
                    <ul>
                        <li><strong>Ikuti Promo Khusus:</strong> Pastikan Anda selalu mengecek banner carousel di halaman utama kami untuk promo dan diskon terbaru.</li>
                        <li><strong>Beli Paket Bundling:</strong> Terkadang kami menawarkan paket produk yang lebih hemat jika dibeli bersamaan.</li>
                        <li><strong>Manfaatkan Program Referral:</strong> Ajak teman untuk berbelanja dan dapatkan keuntungan bersama! (Jika tersedia)</li>
                        <li><strong>Daftar Akun:</strong> Dengan menjadi Reseller, Anda mungkin mendapatkan penawaran eksklusif atau poin loyalitas.</li>
                        <li><strong>Pantau Media Sosial:</strong> Kami sering mengumumkandiskon mendadak di media sosial kami.</li>
                    </ul>
                    <p>Jangan lewatkan kesempatan untuk mendapatkan produk digital premium dengan harga terbaik!</p>
                `,
                "FAQ": `
                    <h4>Pertanyaan yang Sering Diajukan (FAQ):</h4>
                    <p><strong>Q: Bagaimana cara mendapatkan akses setelah pembelian?</strong><br>
                    A: Setelah pembayaran Anda terverifikasi, detail akses (akun/lisensi) akan dikirimkan melalui nomor WhatsApp yang akan diarahkan setelah mengkonfirmasi pembayaran, dan akan diproses dalam waktu singkat (biasanya 1-15 menit pada jam kerja).</p>
                    <p><strong>Q: Apakah produk digital di XiamoStore legal dan aman?</strong><br>
                    A: Ya, semua produk digital yang kami tawarkan adalah legal dan diperoleh dari sumber resmi. Kami menjamin keamanan dan keabsahan setiap layanan.</p>
                    <p><strong>Q: Bisakah saya mengubah atau membatalkan pesanan?</strong><br>
                    A: Pembatalan atau perubahan pesanan mungkin terbatas setelah pembayaran dikonfirmasi. Mohon periksa kembali detail pesanan Anda sebelum melanjutkan pembayaran.</p>
                    <p><strong>Q: Jika ada masalah dengan produk, bagaimana cara menghubungi dukungan?</strong><br>
                    A: Anda dapat menghubungi admin kami melalui WhatsApp di nomor yang tertera di footer atau melalui link "Tanya Admin". Kami siap membantu Anda.</p>
                    <p>Untuk pertanyaan lebih lanjut, jangan ragu untuk menghubungi tim dukungan kami!</p>
                `
            };

            // Event Delegation untuk Kategori Produk
            if (footerProductCategories) {
                footerProductCategories.addEventListener('click', (event) => {
                    const target = event.target;
                    if (target.tagName === 'A' && target.dataset.linkType === 'category') {
                        event.preventDefault();
                        const title = target.textContent;
                        const content = footerContent[title];
                        if (content) {
                            openInfoModal(title, content);
                        } else {
                            openInfoModal(title, `<p>Detail untuk kategori "${title}" belum tersedia.</p>`);
                        }
                    }
                });
            }

            // Event Delegation untuk Lainnya
            if (footerOtherLinks) {
                footerOtherLinks.addEventListener('click', (event) => {
                    const target = event.target;
                    if (target.tagName === 'A' && target.dataset.linkType === 'other') {
                        event.preventDefault();
                        const title = target.textContent;
                        const content = footerContent[title];
                        if (content) {
                            openInfoModal(title, content);
                        } else {
                            openInfoModal(title, `<p>Detail untuk "${title}" belum tersedia.</p>`);
                        }
                    }
                });
            }
        });
    </script>
</body>
</html>